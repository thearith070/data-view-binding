# Data/View Binding for Beginner in Android

## Description
  - View Binding is a lightweight library that generates a binding class at compile time, allowing you to easily access views in your app's layout files in a type-safe manner. It simplifies view access and eliminates the need for manual view binding, making your code more readable and maintainable.

  - Data Binding, on the other hand, is a more powerful library that goes beyond view access and allows you to bind UI components directly to data sources in your app's architecture. It allows you to use expressions to transform data and even implement two-way data binding, where changes made to the UI are automatically reflected in the data source and vice versa.

## Table of Contents
  - [View Binding](https://developer.android.com/topic/libraries/view-binding)
  - [Data Binding](https://developer.android.com/topic/libraries/data-binding)
  - [Two-Way Data Binding](https://developer.android.com/topic/libraries/data-binding/two-way)

## Screenshots
<img width="150" alt="Screen Shot 2023-03-27 at 11 10 37 PM" src="https://user-images.githubusercontent.com/29136735/227999987-a7fb7fa3-b659-4052-aa88-da1f0c150b02.png"> <img width="150" alt="Screen Shot 2023-03-27 at 11 11 56 PM" src="https://user-images.githubusercontent.com/29136735/228000334-ff0dd3b9-2a32-4717-b2f5-159e7954ea13.png"> <img width="150" alt="Screen Shot 2023-03-27 at 11 13 17 PM" src="https://user-images.githubusercontent.com/29136735/228000671-a4d102fc-8c34-4b57-8b27-8b796b1f52f1.png"> <img width="150" alt="Screen Shot 2023-03-27 at 11 16 23 PM" src="https://user-images.githubusercontent.com/29136735/228001395-e23a7c06-fc0a-40ac-aacc-cf99c293decc.png">

## Usage

### View Binding 
 
 ### I. Installation
  To enabled **View Binding** you have to add this snippet to ```app/build.gradle``` and then click sync
 ```
 android {
  ...
  buildFeatures {
        viewBinding true
    }
 }
 ```
 After view binding is enabled for a module, a binding class is generated for each XML layout file that the module contains. Each binding class contains  references to the root view and all views that have an ID. The name of the binding class is generated by converting the name of the XML file to Pascal case and adding the word "Binding" to the end.
 
 For example, consider a layout file called ```activity_view_binding.xml``` that contains the following:
 ```
<LinearLayout 
  ... >

    <TextView
        android:id="@+id/tv_result"
        ... />

    <EditText
        android:id="@+id/edt_a"
        ... />

    <EditText
        android:id="@+id/edt_b"
        ... />

    <Button
        android:id="@+id/btn_sum"
        ... />

</LinearLayout>
 ```
 The generated binding class is called ```ActivityViewBindingBinding```. This class has plenty fields: a TextView called ```tvResult```, two EditText called (```edtA```, ```edtB```) and a Button called ```btnSum```.
 
*NOTE: In xml best practice is to use Snake Case on `view_id` and View Binding will form `view_id` to Camel Case*

 ### II. I would like to ignore some of my xml files to be generated
 If you want a layout file to be ignored while generating binding classes, add the `tools:viewBindingIgnore="true"` attribute to the root view of that layout file:
 ```
 <LinearLayout
        ...
        tools:viewBindingIgnore="true" >
    ...
</LinearLayout>
 ```

 ### III. How can I use it in Activity?
 To set up an instance of the binding class for use with an activity, perform the following steps in the activity's `onCreate()` method:
 - Call the static `inflate()` method included in the generated binding class. This creates an instance of the binding class for the activity to use.
 - Pass the root view to `setContentView()` to make it the active view on the screen.
 
 These steps are shown in the following example:
 ```
 class ViewBindingActivity : AppCompatActivity() {
 
  private lateinit var binding: ActivityViewBindingBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityViewBindingBinding.inflate(layoutInflater)
        setContentView(binding.root)
        ...
    }
    
    ...
 
 }
 ```
 
 #### After you've followed the steps, here how you access views from xml in Activities
 ```
 class ViewBindingActivity : AppCompatActivity() {

    private lateinit var binding: ActivityViewBindingBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityViewBindingBinding.inflate(layoutInflater)
        setContentView(binding.root)
        setupListener()
    }

    private fun setupListener() {
        binding.btnSum.setOnClickListener {
            val a = binding.edtA.text.toString()
            val b = binding.edtB.text.toString()
            ...
        }
    }
    ...
}
 ```
 `binding` is represent your xml file, therefore every views which exist in xml will be visible by typing `binding.` it suppose to show the dropdown of views: 
 
 <img width="567" alt="Screen Shot 2023-03-29 at 11 19 11 AM" src="https://user-images.githubusercontent.com/29136735/228425776-39be68a7-c838-4494-a9df-e596dd4d676c.png">

 but don't forget to set `id` to views that you necessary to use in Activities or Fragments.
 
  *NOTE: Please check on `ViewBindActivity` for detail.*
  
  ### IV. Comparison to `findViewById`
  - *Null safety*: since view binding creates direct references to views, there's no risk of a null pointer exception due to an invalid view ID. Additionally, when a view is only present in some configurations of a layout, the field containing its reference in the binding class is marked with `@Nullable`.
  - *Type safety*: the fields in each binding class have types matching the views they reference in the XML file. This means there's no risk of a class cast exception.

  ### V. Limitation
  - *View binding* doesn't support [layout variables or layout expressions](https://developer.android.com/topic/libraries/data-binding/expressions), so it can't be used to declare dynamic UI content straight from XML layout files.
  - *View binding* doesn't support [two-way data binding](https://developer.android.com/topic/libraries/data-binding/two-way).
 
 ### Data Binding 

  ### I. Installation 
  To enabled **Data Binding** you have to add this snippet to ```app/build.gradle``` and then click sync
 ```
 android {
  ...
  buildFeatures {
        ...
        dataBinding true
    }
 }
 ```
  After `Data Binding` is enabled for a module, a binding class is not generated for each XML layout file yet it is not same to `View Binding`.
  
  ### II. How can I have my generated binding class
  First of all, you need to wrap your xml layout file in a `layout` tag: 
  `activity_data_binding.xml`
 ```
 <?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">
  
    <data>

        ...

    </data>

    <!--Root Layout-->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        ...>

        ...

    </LinearLayout>

</layout>
 ```
  After this you could see generated binding class named `ActivityDataBindingBinding`. *Generated Binding Class* is similary to `View Binding`.
 
  *NOTE: If you decided to use `Data Binding` you should not use `View Binding` anymore. Because `Data Binding` takes place of `View Binding` already.*
 
  Here how it used in your Activities:
```
 class DataBindingActivity : AppCompatActivity() {

    private lateinit var binding: ActivityDataBindingBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)
        ...
    }

    ...

}
```
 
 Or you can use same to `View Binding` case:
```
 class DataBindingActivity : AppCompatActivity() {

    private lateinit var binding: ActivityDataBindingBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityDataBindingBinding.inflate(layoutInflater)
        setContentView(binding.root)
        ...
    }

    ...

}
```
  Accessing views in xml on Activities or Fragments way the same to `View Binding`, let read [here](https://github.com/thearith070/databinding/edit/master/README.md#after-youve-followed-the-steps-here-how-you-access-views-from-xml-in-activities) if you have skipped it.
  
  ### III. Why should I use `Data Binding` over `View Binding` if they're almost the same.
  Yeah, that's good question!
  
  If you read `View Binding` content. You will see its limitation, let read [here](https://github.com/thearith070/databinding#v-limitation) if you have skipped it. 
  
  Please, take a moment to consider if you could declare variable in xml and use it within xml directly and can also put some condition as well. That's called [layout variables or layout expressions](https://developer.android.com/topic/libraries/data-binding/expressions). 
  
  If you wish you to declare variable and use it. You need to declare that variable in `data` tag which `data` tag is in `layout` tag.
  There are two important sub-tags (`import`, `variable`) that can be used under the `data` tag.
  
  - `import` is used to import classes that will be used in the layout file. For example:
 
    ```
      <data>
        <import type="com.example.myapp.model.User" />
        <variable name="user" type="User" />
      </data>
    ```
    Here, the `import` tag is used to `import` the User class from the `com.example.myapp.model` package. 
    
   - `variable` tag is used to define a variable that will be used in the layout file. It has the following attributes:
   
        - `name` The name of the variable.
        
        - `type` The type of the variable.
        
        - `value` The initial value of the variable.
        
     For example:
     ```
       <data>
          <import type="com.example.myapp.model.User" />
          
          <variable name="user" type="User" />
          <variable name="userName" type="String" />
          <variable name="userAge" type="int" />
       </data>
     ```
     Here, the `data` tag defines two variables, `userName` of type `String` and `userAge` of type `int`. These variables can be used in the layout file to display data.
     
 ### IV. How to use variables in xml?
 To use the imported class or variable in the layout, you can reference them using the `@{}` syntax. For example:
 ```
 <TextView
    android:text="@{user.name}"
    android:visibility="@{user.isAdmin ? View.VISIBLE : View.GONE}"/>
 ```
 In this example you see we can use and even more has condition to visible `TextView` whenever user is ADMIN. And there are many more.
 
 THAT'S ALL FOR DATA BINDING! ‚ò∫Ô∏è‚ò∫Ô∏è
 
 ### Two-way Data Binding
 In Android, two-way data binding is achieved using the Data Binding Library. This library allows you to bind UI elements to data model properties using an XML syntax. When a UI element is bound to a data model property, any changes made to the UI element are automatically propagated to the data model, and any changes made to the data model are automatically reflected in the UI element. 
 
 In short `Two-way` is the part of `Data Binding` therefore the steps are completely the same. Now let see the example then you will see how `the model` and `the UI` changes made in either direction to be feflected in the other.
  
  Let say we have a model `User` which has `name` & `email` as properties and two `EditText`s for update those properties whenever somethings change on both side. 
  
  MODEL `User`
  ```
  data class User(
    var name: String,
    var email: String
  )
  ```
  
  UI `xml`
  ```
  <?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        ...

    </data>

    <LinearLayout
        ...>

        <EditText
            android:id="@+id/edt_name"
            ... />

        <EditText
            android:id="@+id/edt_email"
            ... />

        <Button
            android:id="@+id/btn_print"
            ... />

    </LinearLayout>

</layout>
  ```
  
  So if you don't have `Two-way Data Binding` you might do the following steps:
   - Init a user object: `private val user = User("Thearith", "thearith@gmail.com")`
   - Set listener to both `EditText`s to listen whener USER type something and then update that `user object` by `user.name = 'some name'` & `user.email = some email`.
   - Or another ways
    
  But with `Two-way Data Binding` you replace these steps by putting `@={user.name}` and `@={user.email}`. That's all!
  
  Let see the sample:
  In XML
  
  ```
  <?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <import type="com.sample.databinding.User"/>

        <variable
            name="user"
            type="User" />

    </data>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:gravity="center"
        android:orientation="vertical"
        tools:context=".TwoWaysDataBindingActivity">

        <EditText
            android:id="@+id/edt_name"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="Input name"
            android:imeOptions="actionDone"
            android:inputType="text"
            android:maxLines="1"
            android:text="@={user.name}" />

        <EditText
            android:id="@+id/edt_email"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="Input email"
            android:inputType="textEmailAddress"
            android:maxLines="1"
            android:text="@={user.email}" />

        <Button
            android:id="@+id/btn_print"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Print" />

    </LinearLayout>

</layout>
  ```
  
  In Activity
  ```
  class TwoWaysDataBindingActivity : AppCompatActivity() {

    private lateinit var binding: Activity2waysDataBindingBinding
    private val user = User("Thearith", "thearith@gmail.com")

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = DataBindingUtil.setContentView(this, R.layout.activity_2ways_data_binding)
        binding.user = user
        setupListener()
    }

    private fun setupListener() {
        binding.btnPrint.setOnClickListener {
            println(user)
        }
    }
}
  ```
  
  You can see nothing do on Activity, so please clone this project and click on `2Ways Data Binding` Button and explore more by YOURSELF!.
  
  Remember: `Data Binding`: `@{}` and `Two-way Data Binding`: `@={}`.  Have fun ‚ò∫Ô∏èüòä
  
  
  =========================================THANK YOU==============================
  
 
  
 
 
 
 
  
  
 
  
  
   
  
